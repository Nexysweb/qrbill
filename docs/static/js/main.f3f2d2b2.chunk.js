(this["webpackJsonp@nexys/qrbill"]=this["webpackJsonp@nexys/qrbill"]||[]).push([[0],{180:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(25),m=n.n(l),o=n(28),c=n(15),i=n(26),d={borderTop:"1px solid #e5e5e5",borderBottom:"1px solid #e5e5e5",boxShadow:"0 .25rem .75rem rgba(0, 0, 0, .05)"},s="Swiss QR Bill",u="",f=[{name:"QR Reader",link:"/qr/read"},{name:"QR Writer",link:"/qr/write"},{name:"Convert",link:"/convert"},{name:"Validate",link:"/validate"}];var p=function(e){var t=a.a.createElement("header",null,a.a.createElement("div",{style:d,className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white"},a.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},a.a.createElement(i.Link,{to:u+"/"},s)),a.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},f.map((function(e,t){return a.a.createElement(i.Link,{className:"p-2 text-dark",key:t,to:e.link},e.name)})))));return a.a.createElement(a.a.Fragment,null,t,a.a.createElement("div",{className:"container"},e.children))},h=n(19),g=n(22),C=n(27),E={QRType:"SPC",Version:"0200",Coding:"1"},v=function(e){return function(e,t){return t&&null!==t?e.map((function(e){return t[e]})):e.map((function(e){return""}))}(["AdrTp","Name","StrNameOrAdrLine1","StrNameOrAdrLine2","PstCd","TmwNm","Ctry"],e)},b=function(e){var t=["QRType","Version","Coding"].map((function(t){return e.Header[t]})),n=e.CdtrInf.IBAN,r=v(e.CdtrInf.Cdtr),a=v(e.UltmtCdtr),l=v(e.UltmtDtr),m=["Amt","Ccy"].map((function(t){return e.CcyAmt[t]})),o=[e.RmtInf.Tp,e.RmtInf.Ref],c=["Ustrd","Trailer","SrdBkgInfo"].map((function(t){return e.RmtInf.AddInf[t]})),i=function(e){var t=["AltPmt1","AltPmt2"];return e&&null!==e?t.map((function(t){return e[t]})):t.map((function(e){return""}))}(e.AltPmtInf);return t.concat(n).concat(r).concat(a).concat(m).concat(l).concat(o).concat(c).concat(i)},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={AdrTp:e[t],Name:e[t+1],StrNameOrAdrLine1:e[t+2],StrNameOrAdrLine2:e[t+3],PstCd:e[t+4],TmwNm:e[t+5],Ctry:e[t+6]},r=Object.keys(n).map((function(e){return""===n[e]})).reduce((function(e,t){return e&&t}));if(!0!==r)return n},A=function(e){var t=e[3],n=y(e,4);if(!n)throw Error("cdtr is undefined");var r={IBAN:t,Cdtr:n},a=y(e,11),l=y(e,20),m={Ccy:e[19],Amt:e[18]},o={Ustrd:e[29],Trailer:e[30],SrdBkgInfo:e[31]},c={Tp:e[27],Ref:e[28],AddInf:o},i={AltPmt1:e[32],AltPmt2:e[33]};return{Header:E,CdtrInf:r,UltmtCdtr:a,UltmtDtr:l,CcyAmt:m,RmtInf:c,AltPmtInf:i}},O=("S\nRobert Schneider AG\nRue du Lac\n1268\n2501\nBiel\nCH".split("\n"),"SPC\n0200\n1\nCH4431999123000889012\nS\nRobert Schneider AG\nRue du Lac\n1268\n2501\nBiel\nCH\n\n\n\n\n\n\n\n1949.75\nCHF\nS\nPia-Maria Rutschmann-Schnyder\nGrosse Marktgasse\n28\n9400\nRorschach\nCH\nQRR\n210000000003139471430009017\nOrder of 15 June 2020\nEPD\n//S1/10/10201409/11/200701/20/140.000-53/30/102673831/31/200615/32/7.7/33/7.7:139.40/40/0:30\nName AV1: UV;UltraPay005;12345\nName AV2: XY;XYService;54321"),N=O.split("\n"),w={Header:E,CdtrInf:{IBAN:"CH4431999123000889012",Cdtr:{AdrTp:"S",Name:"Robert Schneider AG",StrNameOrAdrLine1:"Rue du Lac",StrNameOrAdrLine2:"1268",PstCd:"2501",TmwNm:"Biel",Ctry:"CH"}},CcyAmt:{Amt:"1949.75",Ccy:"CHF"},UltmtDtr:{AdrTp:"S",Ctry:"CH",Name:"Pia-Maria Rutschmann-Schnyder",PstCd:"9400",StrNameOrAdrLine1:"Grosse Marktgasse",StrNameOrAdrLine2:"28",TmwNm:"Rorschach"},UltmtCdtr:void 0,RmtInf:{AddInf:{SrdBkgInfo:"//S1/10/10201409/11/200701/20/140.000-53/30/102673831/31/200615/32/7.7/33/7.7:139.40/40/0:30",Trailer:"EPD",Ustrd:"Order of 15 June 2020"},Ref:"210000000003139471430009017",Tp:"QRR"},AltPmtInf:{AltPmt1:"Name AV1: UV;UltraPay005;12345",AltPmt2:"Name AV2: XY;XYService;54321"}};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(){var e=Object(r.useState)({text:O}),t=Object(g.a)(e,2),n=t[0],l=t[1];return a.a.createElement("div",null,a.a.createElement("h3",null,"Converts output (break line separated text) into JSON"),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=A(n.text.split("\n"));l(I({},n,{convert:t}))}},a.a.createElement(C.Form.Textarea,{onChange:function(e){return l(I({},n,{text:e.value}))},name:"text",value:n.text}),a.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Convert"))),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("pre",null,JSON.stringify(n.convert,null,2)))))},x=n(6),R=n.n(x),j=R.a.object({AdrTp:R.a.string().regex(/^[ST]$/),Ctry:R.a.string().regex(/^[A-Z]{2}$/),Name:R.a.string(),PstCd:R.a.string(),StrNameOrAdrLine1:R.a.string(),StrNameOrAdrLine2:R.a.string(),TmwNm:R.a.string()}).unknown(!0),T=R.a.object({IBAN:R.a.string().regex(/[a-zA-Z]{2}[0-9]{2}[a-zA-Z0-9]{4}[0-9]{7}([a-zA-Z0-9]?){0,16}/),Cdtr:j}),U=R.a.object({QRType:R.a.string().valid("SPC"),Version:R.a.string().regex(/^\d{4}$/).valid("0200"),Coding:R.a.string().regex(/^1$/)}),k=R.a.object({Amt:R.a.string().regex(/^\d+\.\d{2}$/),Ccy:R.a.string().regex(/^[A-Z]{3}$/)}),D=R.a.object({AddInf:R.a.object({SrdBkgInfo:R.a.string().optional(),Trailer:R.a.string().valid("EPD"),Ustrd:R.a.string().optional()}),Ref:R.a.string().optional(),Tp:R.a.string().valid("QRR")}),L=R.a.object({AltPmt1:R.a.string().optional(),AltPmt2:R.a.string().optional()}),B=R.a.object({Header:U,CdtrInf:T,CcyAmt:k,UltmtDtr:j.allow(null).optional(),UltmtCdtr:j.allow(null).optional(),RmtInf:D,AltPmtInf:L}),Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return t.validate(e,{presence:"required"})};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(){var e=Object(r.useState)({text:JSON.stringify(w,null,2)}),t=Object(g.a)(e,2),n=t[0],l=t[1];return a.a.createElement("div",null,a.a.createElement("h3",null,"Validate JSON with JOI"),a.a.createElement("p",null,"see source"," ",a.a.createElement("a",{href:"https://github.com/Nexysweb/qrbill/blob/master/src/lib/validate.js"},"here")),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=Q(JSON.parse(n.text));l(J({},n,{validate:t}))}},a.a.createElement(C.Form.Textarea,{onChange:function(e){return l(J({},n,{text:e.value}))},name:"text",value:n.text}),a.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Validate"))),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("h4",null,"Output of JOI after validating"),a.a.createElement("pre",null,JSON.stringify(n.validate,null,2)))))},q=n(87),F=n.n(q),G=function(){var e=Object(r.useState)("no result"),t=Object(g.a)(e,2),n=t[0],l=t[1],m=function(e){if(e){var t=e.split("\n"),n=A(t);console.log(n),!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return!Q(e,t).error}(n)?l("The QR Code read is not a valid Swiss QRBIll"):l(n)}},o=function(e){console.error(e)};return a.a.createElement("div",null,a.a.createElement(F.a,{delay:300,onError:o,onScan:m,style:{width:"300px"}}),a.a.createElement("pre",null,JSON.stringify(n,null,2)))},M=n(89),$=n.n(M);var z=function(e){var t=e.value;if(!Array.isArray(t)||34!==t.length)return console.error("an array is expected as input"),null;var n="#000000",r="#ffffff",l="M",m="svg",o=!1,c=300/46*7;return a.a.createElement("div",{className:"svgHolder",style:{position:"relative"}},a.a.createElement($.a,{value:t.join("\n"),size:300,fgColor:n,bgColor:r,level:l,renderAs:m,includeMargin:o}),a.a.createElement("svg",{style:{margin:"0 auto",position:"absolute",top:150-c+"px",left:150-c+"px"}},a.a.createElement("rect",{x:18.26086956521739,y:18.26086956521739,width:1.2*c,height:1.2*c,r:c,fill:"white"}),a.a.createElement("rect",{x:c/2,y:c/2,width:c,height:c,r:c,fill:"black"}),a.a.createElement("rect",{x:40.630434782608695,y:27.847826086956523,width:1.1/5*c,height:.78*c,fill:"white"}),a.a.createElement("rect",{x:27.847826086956523,y:40.630434782608695,width:.78*c,height:1.1/5*c,fill:"white"})))},Z=n(52),W=C.Form,X=function(e){var t=e.name,n=e.onChange,r=e.form,l=e.errors,m=void 0===l?{}:l,o=Z.ds.get(t,r);return a.a.createElement(W.Wrapper,{name:t,errors:m,label:t},a.a.createElement(W.Input,{name:t,onChange:n,placeholder:t,value:o}))};var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{initial:{}},t=Object(r.useState)(e.initial),n=Object(g.a)(t,2),l=n[0],m=n[1],o=function(t){var n=Z.ds.set(t.name,t.value,l);m(n),e.onRefresh(l)};return a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onRefresh(l)}},a.a.createElement("h5",null,"CdtrInf"),a.a.createElement(X,{name:"CdtrInf.IBAN",form:l,onChange:o}),a.a.createElement(X,{name:"CdtrInf.Cdtr.AdrTp",form:l,onChange:o}),a.a.createElement(X,{name:"CdtrInf.Cdtr.Name",form:l,onChange:o}),a.a.createElement(X,{name:"CdtrInf.Cdtr.StrNameOrAdrLine1",form:l,onChange:o}),a.a.createElement(X,{name:"CdtrInf.Cdtr.StrNameOrAdrLine2",form:l,onChange:o}),a.a.createElement(X,{name:"CdtrInf.Cdtr.PstCd",form:l,onChange:o}),a.a.createElement(X,{name:"CdtrInf.Cdtr.TmwNm",form:l,onChange:o}),a.a.createElement(X,{name:"CdtrInf.Cdtr.Ctry",form:l,onChange:o}),a.a.createElement("h5",null,"CcyAmt"),a.a.createElement(X,{name:"CcyAmt.Amt",form:l,onChange:o}),a.a.createElement(X,{name:"CcyAmt.Ccy",form:l,onChange:o}),a.a.createElement("h5",null,"UltmtCdtr"),a.a.createElement(X,{name:"UltmtCdtr.AdrTp",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtCdtr.Name",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtCdtr.StrNameOrAdrLine1",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtCdtr.StrNameOrAdrLine2",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtCdtr.PstCd",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtCdtr.TmwNm",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtCdtr.Ctry",form:l,onChange:o}),a.a.createElement("h5",null,"UltmtDbtr"),a.a.createElement(X,{name:"UltmtDtr.AdrTp",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtDtr.Name",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtDtr.StrNameOrAdrLine1",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtDtr.StrNameOrAdrLine2",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtDtr.PstCd",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtDtr.TmwNm",form:l,onChange:o}),a.a.createElement(X,{name:"UltmtDtr.Ctry",form:l,onChange:o}),a.a.createElement("h5",null,"RmtInf"),a.a.createElement(X,{name:"RmtInf.Tp",form:l,onChange:o}),a.a.createElement(X,{name:"RmtInf.Ref",form:l,onChange:o}),a.a.createElement(X,{name:"RmtInf.AddInf.Ustrd",form:l,onChange:o}),a.a.createElement(X,{name:"RmtInf.AddInf.Trailer",form:l,onChange:o}),a.a.createElement(X,{name:"RmtInf.AddInf.SrdBkgInfo",form:l,onChange:o}),a.a.createElement("h5",null,"AltPmtInf"),a.a.createElement(X,{name:"AltPmtInf.AltPmt1",form:l,onChange:o}),a.a.createElement(X,{name:"AltPmtInf.AltPmt2",form:l,onChange:o}),a.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Generate"))};var K=function(){var e=Object(r.useState)(N),t=Object(g.a)(e,2),n=t[0],l=t[1];return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("h3",null,"Generated Swiss QR"),a.a.createElement(z,{value:n})),a.a.createElement("div",{className:"col-md-3"},a.a.createElement(Y,{initial:w,onRefresh:function(e){l(b(e))}})),a.a.createElement("div",{className:"col-md-3"},a.a.createElement("h3",null,"QR Content ",a.a.createElement("small",null,"as JSON")),a.a.createElement("pre",null,JSON.stringify(A(n),null,2))))},_=function(){return a.a.createElement("div",null,a.a.createElement("p",null,"Here you can play with different tools to understand the Swiss QR Bill"),a.a.createElement("p",null,a.a.createElement("b",null,a.a.createElement(i.Link,{to:"/qr/read"},"Click here")," if you would like to read a Swiss QR Code")),a.a.createElement("p",null,"Browse the menu for more options"),a.a.createElement("p",null,"Do you need help with the transition to the new ",a.a.createElement("a",{href:"https://www.six-group.com/interbank-clearing/en/home/standardization/payment-slips.html"},"QR Bill")," and in general ",a.a.createElement("a",{href:"https://www.six-group.com/interbank-clearing/en/home/standardization/iso-payments.html"},"ISO20022"),"? Please get in touch at ",a.a.createElement("a",{href:"info@nexys.ch"},"info [@] nexys.ch")),a.a.createElement("p",null,a.a.createElement("a",{href:"https://github.com/Nexysweb/qrbill"},a.a.createElement(C.Components.Icon,{name:"code"})," Source")," available under MIT license. Contributions are welcome."))},ee=function(){return a.a.createElement("p",null,"Page Not Found")};var te=Object(o.o)((function(e){return a.a.createElement(p,null,a.a.createElement(o.g,null,a.a.createElement(o.d,{exact:!0,path:"/",component:_}),a.a.createElement(o.d,{exact:!0,path:"/qr/read",component:G,props:e}),a.a.createElement(o.d,{exact:!0,path:"/qr/write",component:function(){return a.a.createElement(K,null)},props:e}),a.a.createElement(o.d,{exact:!0,path:"/convert",component:P,props:e}),a.a.createElement(o.d,{exact:!0,path:"/validate",component:V,props:e}),a.a.createElement(o.d,{path:"/",component:ee})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne=c.a({basename:"/qrbill"});m.a.render(a.a.createElement(o.e,{history:ne},a.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,n){e.exports=n(180)}},[[90,1,2]]]);
//# sourceMappingURL=main.f3f2d2b2.chunk.js.map