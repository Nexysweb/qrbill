(this["webpackJsonp@nexys/qrbill"]=this["webpackJsonp@nexys/qrbill"]||[]).push([[0],{179:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(25),m=n.n(l),o=n(28),c=n(15),i=n(26),u={borderTop:"1px solid #e5e5e5",borderBottom:"1px solid #e5e5e5",boxShadow:"0 .25rem .75rem rgba(0, 0, 0, .05)"},s="Swiss QR Bill",d="",f=[{name:"QR Reader",link:"/qr/read"},{name:"QR Writer",link:"/qr/write"},{name:"Convert",link:"/convert"},{name:"Validate",link:"/validate"}];var p=function(e){var t=a.a.createElement("header",null,a.a.createElement("div",{style:u,className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white"},a.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},a.a.createElement(i.Link,{to:d+"/"},s)),a.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},f.map((function(e,t){return a.a.createElement(i.Link,{className:"p-2 text-dark",key:t,to:e.link},e.name)})))));return a.a.createElement(a.a.Fragment,null,t,a.a.createElement("div",{className:"container"},e.children))},E=n(16),h=n(20),C=n(27),g={QRType:"SPC",Version:"0200",Coding:"1"},b=function(e){return function(e,t){return t&&null!==t?e.map((function(e){return t[e]})):e.map((function(e){return""}))}(["AdrTp","Name","StrNameOrAdrLine1","StrNameOrAdrLine2","PstCd","TmwNm","Ctry"],e)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={AdrTp:e[t],Name:e[t+1],StrNameOrAdrLine1:e[t+2],StrNameOrAdrLine2:e[t+3],PstCd:e[t+4],TmwNm:e[t+5],Ctry:e[t+6]},r=Object.keys(n).map((function(e){return""===n[e]})).reduce((function(e,t){return e&&t}));if(!0!==r)return n},y=function(e){var t=e[3],n=v(e,4);if(!n)throw Error("cdtr is undefined");var r={IBAN:t,Cdtr:n},a=v(e,11),l=v(e,20),m={Ccy:e[19],Amt:e[18]},o={Ustrd:e[29],Trailer:e[30],StrdBkgInf:e[31]},c={Tp:e[27],Ref:e[28],AddInf:o},i={AltPmt1:e[32],AltPmt2:e[33]};return{Header:g,CdtrInf:r,UltmtCdtr:a,UltmtDtr:l,CcyAmt:m,RmtInf:c,AltPmtInf:i}},O=("S\nRobert Schneider AG\nRue du Lac\n1268\n2501\nBiel\nCH".split("\n"),"SPC\n0200\n1\nCH4431999123000889012\nS\nRobert Schneider AG\nRue du Lac\n1268\n2501\nBiel\nCH\n\n\n\n\n\n\n\n1949.75\nCHF\nS\nPia-Maria Rutschmann-Schnyder\nGrosse Marktgasse\n28\n9400\nRorschach\nCH\nQRR\n210000000003139471430009017\nOrder of 15 June 2020\nEPD\n//S1/10/10201409/11/200701/20/140.000-53/30/102673831/31/200615/32/7.7/33/7.7:139.40/40/0:30\nName AV1: UV;UltraPay005;12345\nName AV2: XY;XYService;54321"),A=(O.split("\n"),{Header:g,CdtrInf:{IBAN:"CH4431999123000889012",Cdtr:{AdrTp:"S",Name:"Robert Schneider AG",StrNameOrAdrLine1:"Rue du Lac",StrNameOrAdrLine2:"1268",PstCd:"2501",TmwNm:"Biel",Ctry:"CH"}},CcyAmt:{Amt:"1949.75",Ccy:"CHF"},UltmtDtr:{AdrTp:"S",Ctry:"CH",Name:"Pia-Maria Rutschmann-Schnyder",PstCd:"9400",StrNameOrAdrLine1:"Grosse Marktgasse",StrNameOrAdrLine2:"28",TmwNm:"Rorschach"},UltmtCdtr:void 0,RmtInf:{AddInf:{StrdBkgInf:"//S1/10/10201409/11/200701/20/140.000-53/30/102673831/31/200615/32/7.7/33/7.7:139.40/40/0:30",Trailer:"EPD",Ustrd:"Order of 15 June 2020"},Ref:"210000000003139471430009017",Tp:"QRR"},AltPmtInf:{AltPmt1:"Name AV1: UV;UltraPay005;12345",AltPmt2:"Name AV2: XY;XYService;54321"}});function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(){var e=Object(r.useState)({text:O}),t=Object(h.a)(e,2),n=t[0],l=t[1];return a.a.createElement("div",null,a.a.createElement("h3",null,"Converts output (break line separated text) into JSON"),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=y(n.text.split("\n"));l(N({},n,{convert:t}))}},a.a.createElement(C.Form.Textarea,{onChange:function(e){return l(N({},n,{text:e.value}))},name:"text",value:n.text}),a.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Convert"))),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("pre",null,JSON.stringify(n.convert,null,2)))))},I=n(6),P=n.n(I),x=P.a.object({AdrTp:P.a.string().regex(/^[SK]$/),Ctry:P.a.string().regex(/^[A-Z]{2}$/),Name:P.a.string().max(70),PstCd:P.a.string().max(16),StrNameOrAdrLine1:P.a.string().max(70),StrNameOrAdrLine2:P.a.string().max(70),TmwNm:P.a.string().max(35)}).unknown(!0),R=P.a.object({IBAN:P.a.string().regex(/(?:CH|LI)[0-9]{2}[a-zA-Z0-9]{4}[0-9]{7}([a-zA-Z0-9]?){0,16}/),Cdtr:x}),j=P.a.object({QRType:P.a.string().valid("SPC"),Version:P.a.string().regex(/^\d{4}$/).valid("0200"),Coding:P.a.string().regex(/^1$/)}),k=P.a.object({Amt:P.a.string().regex(/^\d+\.\d{2}$/),Ccy:P.a.string().regex(/(?:CHF|EUR)/)}),T=P.a.object({AddInf:P.a.object({StrdBkgInf:P.a.string().optional().max(140),Trailer:P.a.string().valid("EPD"),Ustrd:P.a.string().optional().max(140)}),Tp:P.a.string().valid("QRR").valid("SCOR").valid("NON"),Ref:P.a.string().optional()}),U=P.a.object({AltPmt1:P.a.string().optional().max(100),AltPmt2:P.a.string().optional().max(100)}),D=P.a.object({Header:j,CdtrInf:R,CcyAmt:k,UltmtDtr:x.allow(null).optional(),UltmtCdtr:x.allow(null).optional(),RmtInf:T,AltPmtInf:U}),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D;return t.validate(e,{presence:"required"})},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D;return!L(e,t).error};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(){var e=Object(r.useState)({text:JSON.stringify(A,null,2)}),t=Object(h.a)(e,2),n=t[0],l=t[1];return a.a.createElement("div",null,a.a.createElement("h3",null,"Validate JSON with JOI"),a.a.createElement("p",null,"see source"," ",a.a.createElement("a",{href:"https://github.com/Nexysweb/qrbill/blob/master/src/lib/validate.js"},"here")),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=L(JSON.parse(n.text));l(Q({},n,{validate:t}))}},a.a.createElement(C.Form.Textarea,{onChange:function(e){return l(Q({},n,{text:e.value}))},name:"text",value:n.text}),a.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Validate"))),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("h4",null,"Output of JOI after validating"),a.a.createElement("pre",null,JSON.stringify(n.validate,null,2)))))},J=n(87),V=n.n(J),z=function(){var e=Object(r.useState)("no result"),t=Object(h.a)(e,2),n=t[0],l=t[1],m=function(e){if(e){var t=e.split("\n"),n=y(t);console.log(n),B(n)?l(n):l("The QR Code read is not a valid Swiss QRBIll")}},o=function(e){console.error(e)};return a.a.createElement("div",null,a.a.createElement(V.a,{delay:300,onError:o,onScan:m,style:{width:"300px"}}),a.a.createElement("pre",null,JSON.stringify(n,null,2)))},F=function(e){return e?a.a.createElement("p",null,a.a.createElement("b",null,"Payable By"),G(e)):null},G=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("br",null),e.Name,a.a.createElement("br",null),e.StrNameOrAdrLine1," ",e.StrNameOrAdrLine2,a.a.createElement("br",null),e.TmwNm)},M=function(e){var t=e.size,n=e.qr;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{position:"absolute"}},a.a.createElement("p",null,a.a.createElement("b",null,"Currency"),a.a.createElement("br",null),n.CcyAmt.Ccy)),a.a.createElement("div",{style:{position:"absolute",left:100}},a.a.createElement("p",null,a.a.createElement("b",null,"Amount"),a.a.createElement("br",null),n.CcyAmt.Amt)),a.a.createElement("div",{style:{position:"absolute",left:t+17,top:-5}},a.a.createElement("p",null,a.a.createElement("b",null,"Account/Payable to"),a.a.createElement("br",null),n.CdtrInf.IBAN,G(n.CdtrInf.Cdtr)),a.a.createElement("p",null,a.a.createElement("b",null,"Reference"),a.a.createElement("br",null),n.RmtInf.Ref),F(n.UltmtDtr)))},$=n(89),W=n.n($),X=function(e){var t=e.value,n=e.size,r="#000000",l="#ffffff",m="M",o="svg",c=!1;return a.a.createElement(W.a,{value:t,size:n,fgColor:r,bgColor:l,level:m,renderAs:o,includeMargin:c})},Y=function(e){var t=e.size/46*7;return a.a.createElement(a.a.Fragment,null,a.a.createElement("svg",{style:{margin:"0 auto",position:"absolute",top:150-t+"px",left:150-t+"px"}},a.a.createElement("rect",{x:t/2-.1*t,y:t/2-.1*t,width:1.2*t,height:1.2*t,r:t,fill:"white"}),a.a.createElement("rect",{x:t/2,y:t/2,width:t,height:t,r:t,fill:"black"}),a.a.createElement("rect",{x:t/2+t/2-1.1/5/2*t,y:t/2+1.1/5/2*t,width:1.1/5*t,height:.78*t,fill:"white"}),a.a.createElement("rect",{x:t/2+1.1/5/2*t,y:t/2+t/2-1.1/5/2*t,width:.78*t,height:1.1/5*t,fill:"white"})))},Z=function(e){var t=e.qr,n=e.withExtraInfo,r=void 0!==n&&n;if(!B(t))return a.a.createElement("p",null,a.a.createElement("i",null,"Invalid Input"));var l=function(e){var t=["QRType","Version","Coding"].map((function(t){return e.Header[t]})),n=e.CdtrInf.IBAN,r=b(e.CdtrInf.Cdtr),a=b(e.UltmtCdtr),l=b(e.UltmtDtr),m=["Amt","Ccy"].map((function(t){return e.CcyAmt[t]})),o=[e.RmtInf.Tp,e.RmtInf.Ref],c=["Ustrd","Trailer","StrdBkgInf"].map((function(t){return e.RmtInf.AddInf[t]})),i=function(e){var t=["AltPmt1","AltPmt2"];return e&&null!==e?t.map((function(t){return e[t]})):t.map((function(e){return""}))}(e.AltPmtInf);return t.concat(n).concat(r).concat(a).concat(m).concat(l).concat(o).concat(c).concat(i)}(t);return a.a.createElement("div",{style:{position:"relative"}},a.a.createElement(X,{value:l.join("\n"),size:300}),a.a.createElement(Y,{size:300}),r?a.a.createElement(M,{qr:t,size:300}):null)},K=n(52),_=C.Form,ee=function(e){var t=e.name,n=e.onChange,r=e.form,l=e.errors,m=void 0===l?{}:l,o=K.ds.get(t,r);return a.a.createElement(_.Wrapper,{name:t,errors:m,label:t},a.a.createElement(_.Input,{name:t,onChange:n,placeholder:t,value:o}))};var te=function(e){var t=Object(r.useState)(e.initial||{}),n=Object(h.a)(t,2),l=n[0],m=n[1],o=function(t){var n=K.ds.set(t.name,t.value,l);m(n),e.onRefresh(l)};return a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onRefresh(l)}},a.a.createElement("h5",null,"CdtrInf"),a.a.createElement(ee,{name:"CdtrInf.IBAN",form:l,onChange:o}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.AdrTp",form:l,onChange:o}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.Name",form:l,onChange:o}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.StrNameOrAdrLine1",form:l,onChange:o}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.StrNameOrAdrLine2",form:l,onChange:o}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.PstCd",form:l,onChange:o}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.TmwNm",form:l,onChange:o}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.Ctry",form:l,onChange:o}),a.a.createElement("h5",null,"CcyAmt"),a.a.createElement(ee,{name:"CcyAmt.Amt",form:l,onChange:o}),a.a.createElement(ee,{name:"CcyAmt.Ccy",form:l,onChange:o}),a.a.createElement("h5",null,"UltmtCdtr"),a.a.createElement(ee,{name:"UltmtCdtr.AdrTp",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtCdtr.Name",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtCdtr.StrNameOrAdrLine1",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtCdtr.StrNameOrAdrLine2",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtCdtr.PstCd",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtCdtr.TmwNm",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtCdtr.Ctry",form:l,onChange:o}),a.a.createElement("h5",null,"UltmtDbtr"),a.a.createElement(ee,{name:"UltmtDtr.AdrTp",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtDtr.Name",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtDtr.StrNameOrAdrLine1",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtDtr.StrNameOrAdrLine2",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtDtr.PstCd",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtDtr.TmwNm",form:l,onChange:o}),a.a.createElement(ee,{name:"UltmtDtr.Ctry",form:l,onChange:o}),a.a.createElement("h5",null,"RmtInf"),a.a.createElement(ee,{name:"RmtInf.Tp",form:l,onChange:o}),a.a.createElement(ee,{name:"RmtInf.Ref",form:l,onChange:o}),a.a.createElement(ee,{name:"RmtInf.AddInf.Ustrd",form:l,onChange:o}),a.a.createElement(ee,{name:"RmtInf.AddInf.Trailer",form:l,onChange:o}),a.a.createElement(ee,{name:"RmtInf.AddInf.StrdBkgInf",form:l,onChange:o}),a.a.createElement("h5",null,"AltPmtInf"),a.a.createElement(ee,{name:"AltPmtInf.AltPmt1",form:l,onChange:o}),a.a.createElement(ee,{name:"AltPmtInf.AltPmt2",form:l,onChange:o}),a.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Generate"))};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var re=function(){var e=Object(r.useState)(A),t=Object(h.a)(e,2),n=t[0],l=t[1],m=Object(r.useState)(!1),o=Object(h.a)(m,2),c=o[0],i=o[1];return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("h3",null,"Generated Swiss QR"),a.a.createElement(Z,{qr:n,withExtraInfo:c})),a.a.createElement("div",{className:"col-md-3"},a.a.createElement("p",null,a.a.createElement("input",{type:"checkbox",checked:c,onClick:function(){return i(!c)}})," ","with extra information"),a.a.createElement(te,{initial:A,onRefresh:function(e){l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}})),a.a.createElement("div",{className:"col-md-3"},a.a.createElement("h3",null,"QR Content ",a.a.createElement("small",null,"as JSON")),a.a.createElement("pre",null,JSON.stringify(n,null,2))))},ae=function(){return a.a.createElement("div",null,a.a.createElement("p",null,"Here you can play with different tools to understand the Swiss QR Bill"),a.a.createElement("p",null,a.a.createElement("b",null,a.a.createElement(i.Link,{to:"/qr/read"},"Click here")," if you would like to read a Swiss QR Code")),a.a.createElement("p",null,"Browse the menu for more options"),a.a.createElement("p",null,"Do you need help with the transition to the new ",a.a.createElement("a",{href:"https://www.six-group.com/interbank-clearing/en/home/standardization/payment-slips.html"},"QR Bill")," and in general ",a.a.createElement("a",{href:"https://www.six-group.com/interbank-clearing/en/home/standardization/iso-payments.html"},"ISO20022"),"? Please get in touch at ",a.a.createElement("a",{href:"info@nexys.ch"},"info [@] nexys.ch")),a.a.createElement("p",null,a.a.createElement("a",{href:"https://github.com/Nexysweb/qrbill"},a.a.createElement(C.Components.Icon,{name:"code"})," Source")," available under MIT license. Contributions are welcome."))},le=function(){return a.a.createElement("p",null,"Page Not Found")};var me=Object(o.o)((function(e){return a.a.createElement(p,null,a.a.createElement(o.g,null,a.a.createElement(o.d,{exact:!0,path:"/",component:ae}),a.a.createElement(o.d,{exact:!0,path:"/qr/read",component:z,props:e}),a.a.createElement(o.d,{exact:!0,path:"/qr/write",component:function(){return a.a.createElement(re,null)},props:e}),a.a.createElement(o.d,{exact:!0,path:"/convert",component:S,props:e}),a.a.createElement(o.d,{exact:!0,path:"/validate",component:q,props:e}),a.a.createElement(o.d,{path:"/",component:le})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=c.a({basename:"/qrbill"});m.a.render(a.a.createElement(o.e,{history:oe},a.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,n){e.exports=n(179)}},[[90,1,2]]]);
//# sourceMappingURL=main.b122e5b6.chunk.js.map