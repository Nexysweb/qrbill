(this["webpackJsonp@nexys/qrbill"]=this["webpackJsonp@nexys/qrbill"]||[]).push([[0],{123:function(e,t,n){e.exports=n(240)},240:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(35),o=n.n(l),m=n(38),c=n(19),i=n(36),s={borderTop:"1px solid #e5e5e5",borderBottom:"1px solid #e5e5e5",boxShadow:"0 .25rem .75rem rgba(0, 0, 0, .05)"},d="Swiss QR Bill",u=[{name:"QR Reader",link:"/qr/read"},{name:"QR Writer",link:"/qr/write"},{name:"Convert",link:"/convert"},{name:"Validate",link:"/validate"}].map((function(e){return e.link="/qrbill/build"+e.link,e}));var f=function(e){var t=a.a.createElement("header",null,a.a.createElement("div",{style:s,className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white"},a.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},a.a.createElement(i.Link,{to:"/"},d)),a.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},u.map((function(e,t){return a.a.createElement(i.Link,{className:"p-2 text-dark",key:t,to:e.link},e.name)})))));return a.a.createElement(a.a.Fragment,null,t,a.a.createElement("div",{className:"container"},e.children))},p=n(26),h=n(37),C=n(33),E={QRType:"SPC",Version:"0200",Coding:"1"},g=function(e){var t=["AdrTp","Name","StrNameOrAdrLine1","StrNameOrAdrLine2","PstCd","TmwNm","Ctry"];return e&&null!==e?t.map((function(t){return e[t]})):t.map((function(e){return""}))},v=function(e){var t=["QRType","Version","Coding"].map((function(t){return e.Header[t]})),n=e.CdtrInf.IBAN,r=g(e.CdtrInf.Cdtr),a=g(e.UltmtCdtr),l=g(e.UltmtDtr),o=["Amt","Ccy"].map((function(t){return e.CcyAmt[t]})),m=["Tp","Ref"].map((function(t){return e.RmtInf[t]})),c=["Ustrd","Trailer","SrdBkgInfo"].map((function(t){return e.RmtInf.AddInf[t]})),i=["AltPmt1","AltPmt2"].map((function(t){return e.AltPmtInf[t]}));return t.concat(n).concat(r).concat(a).concat(o).concat(l).concat(m).concat(c).concat(i)},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={AdrTp:e[t],Name:e[t+1],StrNameOrAdrLine1:e[t+2],StrNameOrAdrLine2:e[t+3],PstCd:e[t+4],TmwNm:e[t+5],Ctry:e[t+6]},r=Object.keys(n).map((function(e){return""===n[e]})).reduce((function(e,t){return e&&t}));return!0===r?null:n},b=function(e){var t={IBAN:e[3],Cdtr:y(e,4)},n=y(e,11),r=y(e,20),a={Ccy:e[19],Amt:e[18]},l={Ustrd:e[29],Trailer:e[30],SrdBkgInfo:e[31]},o={Tp:e[27],Ref:e[28],AddInf:l},m={AltPmt1:e[32],AltPmt2:e[33]};return{Header:E,CdtrInf:t,UltmtCdtr:n,UltmtDtr:r,CcyAmt:a,RmtInf:o,AltPmtInf:m}},A=("S\nRobert Schneider AG\nRue du Lac\n1268\n2501\nBiel\nCH".split("\n"),"SPC\n0200\n1\nCH4431999123000889012\nS\nRobert Schneider AG\nRue du Lac\n1268\n2501\nBiel\nCH\n\n\n\n\n\n\n\n1949.75\nCHF\nS\nPia-Maria Rutschmann-Schnyder\nGrosse Marktgasse\n28\n9400\nRorschach\nCH\nQRR\n210000000003139471430009017\nOrder of 15 June 2020\nEPD\n//S1/10/10201409/11/200701/20/140.000-53/30/102673831/31/200615/32/7.7/33/7.7:139.40/40/0:30\nName AV1: UV;UltraPay005;12345\nName AV2: XY;XYService;54321"),N=A.split("\n"),O={Header:E,CdtrInf:{IBAN:"CH4431999123000889012",Cdtr:{AdrTp:"S",Name:"Robert Schneider AG",StrNameOrAdrLine1:"Rue du Lac",StrNameOrAdrLine2:"1268",PstCd:"2501",TmwNm:"Biel",Ctry:"CH"}},CcyAmt:{Amt:"1949.75",Ccy:"CHF"},UltmtDtr:{AdrTp:"S",Ctry:"CH",Name:"Pia-Maria Rutschmann-Schnyder",PstCd:"9400",StrNameOrAdrLine1:"Grosse Marktgasse",StrNameOrAdrLine2:"28",TmwNm:"Rorschach"},UltmtCdtr:null,RmtInf:{AddInf:{SrdBkgInfo:"//S1/10/10201409/11/200701/20/140.000-53/30/102673831/31/200615/32/7.7/33/7.7:139.40/40/0:30",Trailer:"EPD",Ustrd:"Order of 15 June 2020"},Ref:"210000000003139471430009017",Tp:"QRR"},AltPmtInf:{AltPmt1:"Name AV1: UV;UltraPay005;12345",AltPmt2:"Name AV2: XY;XYService;54321"}};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(){var e=Object(r.useState)({text:A}),t=Object(h.a)(e,2),n=t[0],l=t[1];return a.a.createElement("div",null,a.a.createElement("h3",null,"Converts output (break line separated text) into JSON"),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=b(n.text.split("\n"));l(w({},n,{convert:t}))}},a.a.createElement(C.Form.Textarea,{onChange:function(e){return l(w({},n,{text:e.value}))},name:"text",value:n.text}),a.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Convert"))),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("pre",null,JSON.stringify(n.convert,null,2)))))},P=n(5),I=n.n(P),x=I.a.object({AdrTp:I.a.string().regex(/^[ST]$/),Ctry:I.a.string().regex(/^[A-Z]{2}$/),Name:I.a.string(),PstCd:I.a.string(),StrNameOrAdrLine1:I.a.string(),StrNameOrAdrLine2:I.a.string(),TmwNm:I.a.string()}).unknown(!0),j=I.a.object({IBAN:I.a.string().regex(/[a-zA-Z]{2}[0-9]{2}[a-zA-Z0-9]{4}[0-9]{7}([a-zA-Z0-9]?){0,16}/),Cdtr:x}),T=I.a.object({QRType:I.a.string().valid("SPC"),Version:I.a.string().regex(/^\d{4}$/).valid("0200"),Coding:I.a.string().regex(/^1$/)}),k=I.a.object({Amt:I.a.string().regex(/^\d+\.\d{2}$/),Ccy:I.a.string().regex(/^[A-Z]{3}$/)}),D=I.a.object({AddInf:I.a.object({SrdBkgInfo:I.a.string().optional(),Trailer:I.a.string().valid("EPD"),Ustrd:I.a.string().optional()}),Ref:I.a.string().optional(),Tp:I.a.string().valid("QRR")}),U=I.a.object({AltPmt1:I.a.string().optional(),AltPmt2:I.a.string().optional()}),B=I.a.object({Header:T,CdtrInf:j,CcyAmt:k,UltmtDtr:x.allow(null).optional(),UltmtCdtr:x.allow(null).optional(),RmtInf:D,AltPmtInf:U}),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return t.validate(e,{presence:"required"})};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(){var e=Object(r.useState)({text:JSON.stringify(O,null,2)}),t=Object(h.a)(e,2),n=t[0],l=t[1];return a.a.createElement("div",null,a.a.createElement("h3",null,"Validate JSON with JOI"),a.a.createElement("p",null,"see source ",a.a.createElement("a",{href:"https://github.com/Nexysweb/qrbill/blob/master/src/lib/validate.js"},"here")),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=L(JSON.parse(n.text));l(Q({},n,{validate:t}))}},a.a.createElement(C.Form.Textarea,{onChange:function(e){return l(Q({},n,{text:e.value}))},name:"text",value:n.text}),a.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Validate"))),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("h4",null,"Output of JOI after validating"),a.a.createElement("pre",null,JSON.stringify(n.validate,null,2)))))},J=n(115),V=n(116),q=n(121),M=n(117),G=n(122),$=n(118),z=n.n($),Z=function(e){function t(e){var n;return Object(J.a)(this,t),(n=Object(q.a)(this,Object(M.a)(t).call(this,e))).handleScan=function(e){if(e){var t=e.split("\n"),r=b(t);console.log(r),L(B,r)?n.setState({result:r}):n.setState({result:"The QR Code read is not a valid Swiss QRBIll"})}},n.handleError=function(e){console.error(e)},n.state={show:!0,result:"No result"},n}return Object(G.a)(t,e),Object(V.a)(t,[{key:"renderReader",value:function(){return this.state.show?a.a.createElement(z.a,{delay:300,onError:this.handleError,onScan:this.handleScan,style:{width:"300px"}}):null}},{key:"toggleReader",value:function(){var e=!this.state.show;this.setState({show:e})}},{key:"render",value:function(){return console.log(this.state.result),a.a.createElement("div",null,this.renderReader(),a.a.createElement("pre",null,JSON.stringify(this.state.result,null,2)))}}]),t}(r.Component),W=n(120),X=n.n(W);var Y=function(e){var t=e.value;if(!Array.isArray(t)||34!==t.length)return console.error("an array is expected as input"),null;var n="#000000",r="#ffffff",l="M",o="svg",m=!1,c=300/46*7;return a.a.createElement("div",{className:"svgHolder",style:{position:"relative"}},a.a.createElement(X.a,{value:t.join("\n"),size:300,fgColor:n,bgColor:r,level:l,renderAs:o,includeMargin:m}),a.a.createElement("svg",{style:{margin:"0 auto",position:"absolute",top:150-c+"px",left:150-c+"px"}},a.a.createElement("rect",{x:18.26086956521739,y:18.26086956521739,width:1.2*c,height:1.2*c,r:c,fill:"white"}),a.a.createElement("rect",{x:c/2,y:c/2,width:c,height:c,r:c,fill:"black"}),a.a.createElement("rect",{x:40.630434782608695,y:27.847826086956523,width:1.1/5*c,height:.78*c,fill:"white"}),a.a.createElement("rect",{x:27.847826086956523,y:40.630434782608695,width:.78*c,height:1.1/5*c,fill:"white"})))},K=n(30),_=C.Form,ee=function(e){var t=e.name,n=e.onChange,r=e.form,l=e.errors,o=void 0===l?{}:l,m=K.ds.get(t,r);return a.a.createElement(_.Wrapper,{name:t,errors:o,label:t},a.a.createElement(_.Input,{name:t,onChange:n,placeholder:t,value:m}))};var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{initial:{}},t=Object(r.useState)(e.initial),n=Object(h.a)(t,2),l=n[0],o=n[1],m=function(t){var n=K.ds.set(t.name,t.value,l);o(n),e.onRefresh(l)};return a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onRefresh(l)}},a.a.createElement("h5",null,"CdtrInf"),a.a.createElement(ee,{name:"CdtrInf.IBAN",form:l,onChange:m}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.AdrTp",form:l,onChange:m}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.Name",form:l,onChange:m}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.StrNameOrAdrLine1",form:l,onChange:m}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.StrNameOrAdrLine2",form:l,onChange:m}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.PstCd",form:l,onChange:m}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.TmwNm",form:l,onChange:m}),a.a.createElement(ee,{name:"CdtrInf.Cdtr.Ctry",form:l,onChange:m}),a.a.createElement("h5",null,"CcyAmt"),a.a.createElement(ee,{name:"CcyAmt.Amt",form:l,onChange:m}),a.a.createElement(ee,{name:"CcyAmt.Ccy",form:l,onChange:m}),a.a.createElement("h5",null,"UltmtCdtr"),a.a.createElement(ee,{name:"UltmtCdtr.AdrTp",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtCdtr.Name",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtCdtr.StrNameOrAdrLine1",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtCdtr.StrNameOrAdrLine2",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtCdtr.PstCd",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtCdtr.TmwNm",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtCdtr.Ctry",form:l,onChange:m}),a.a.createElement("h5",null,"UltmtDbtr"),a.a.createElement(ee,{name:"UltmtDtr.AdrTp",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtDtr.Name",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtDtr.StrNameOrAdrLine1",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtDtr.StrNameOrAdrLine2",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtDtr.PstCd",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtDtr.TmwNm",form:l,onChange:m}),a.a.createElement(ee,{name:"UltmtDtr.Ctry",form:l,onChange:m}),a.a.createElement("h5",null,"RmtInf"),a.a.createElement(ee,{name:"RmtInf.Tp",form:l,onChange:m}),a.a.createElement(ee,{name:"RmtInf.Ref",form:l,onChange:m}),a.a.createElement(ee,{name:"RmtInf.AddInf.Ustrd",form:l,onChange:m}),a.a.createElement(ee,{name:"RmtInf.AddInf.Trailer",form:l,onChange:m}),a.a.createElement(ee,{name:"RmtInf.AddInf.SrdBkgInfo",form:l,onChange:m}),a.a.createElement("h5",null,"AltPmtInf"),a.a.createElement(ee,{name:"AltPmtInf.AltPmt1",form:l,onChange:m}),a.a.createElement(ee,{name:"AltPmtInf.AltPmt2",form:l,onChange:m}),a.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Generate"))};var ne=function(){var e=Object(r.useState)(N),t=Object(h.a)(e,2),n=t[0],l=t[1];return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("h3",null,"Generated Swiss QR"),a.a.createElement(Y,{value:n})),a.a.createElement("div",{className:"col-md-3"},a.a.createElement(te,{initial:O,onRefresh:function(e){l(v(e))}})),a.a.createElement("div",{className:"col-md-3"},a.a.createElement("h3",null,"QR Content ",a.a.createElement("small",null,"as JSON")),a.a.createElement("pre",null,JSON.stringify(b(n),null,2))))};console.log(C);var re=function(){return a.a.createElement("div",null,a.a.createElement("p",null,"Here you can play with different tools to understand the Swiss QR Bill"),a.a.createElement("p",null,a.a.createElement("b",null,a.a.createElement(i.Link,{to:"/qr/read"},"Click here")," if you would like to read a Swiss QR Code")),a.a.createElement("p",null,"Browse the menu for more options"),a.a.createElement("p",null,"Do you need help with the transition to the new ",a.a.createElement("a",{href:"https://www.six-group.com/interbank-clearing/en/home/standardization/payment-slips.html"},"QR Bill")," and in general ",a.a.createElement("a",{href:"https://www.six-group.com/interbank-clearing/en/home/standardization/iso-payments.html"},"ISO20022"),"? Please get in touch at ",a.a.createElement("a",{href:"info@nexys.ch"},"info [@] nexys.ch")),a.a.createElement("p",null,a.a.createElement("a",{href:"https://github.com/Nexysweb/qrbill"},a.a.createElement(C.Components.Icon,{name:"code"})," Source")," available under MIT license. Contributions are welcome."))},ae=["QRType","Version","Coding Type","Compte (IBAN CRE)","Type d'adresse (CRE)","Nom (CRE)","Rue ou ligne d'adresse 1 (CRE)","Num\xe9ro de maison ou ligne d'adresse 2 (CRE)","Code postale (CRE)","Lieu (CRE)","Pays (CRE)","Type d'adresse (CREF)","Nom (CREF)","Rue ou ligne d'adresse 1 (CREF)","Num\xe9ro de maison ou ligne d'adresse 2 (CREF)","Code postale (CREF)","Lieu (CREF)","Pays (CREF)","Montant","Monnaie","Type d'adresse (DEBF)","Nom (DEBF)","Rue ou ligne d'adresse 1 (DEBF)","Num\xe9ro de maison ou ligne d'adresse 2 (DEBF)","Code postale (DEBF)","Lieu (DEBF)","Pays (DEBF)","Type de r\xe9f\xe9rence","R\xe9f\xe9rence","Communication non structur\xe9e","Trailer","Informations de facture","PA1 \u2013 Param\xe8tres","PA2 \u2013 Param\xe8tres"],le=function(){return a.a.createElement("p",null,"Page Not Found")},oe="/qrbill/build";var me=Object(m.o)((function(e){return a.a.createElement(f,null,a.a.createElement(m.g,null,a.a.createElement(m.d,{path:oe+"/qr/read",component:Z,props:e}),a.a.createElement(m.d,{path:oe+"/qr/write",component:function(){return a.a.createElement(ne,{value:ae})},props:e}),a.a.createElement(m.d,{path:oe+"/convert",component:R,props:e}),a.a.createElement(m.d,{path:oe+"/validate",component:H,props:e}),a.a.createElement(m.d,{exact:!0,path:oe+"/",component:re}),a.a.createElement(m.d,{path:"/",component:le})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=c.a();o.a.render(a.a.createElement(m.e,{history:ce},a.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[123,1,2]]]);
//# sourceMappingURL=main.4863a123.chunk.js.map